
output = getSequence(871) |> println

-----------------------------------------------------------

getSequence(n) = concat([seq, [1]])
  where seq =
    iterate(collatzStep, n)
    |> takeWhile(greaterThan(1))

-----------------------------------------------------------

collatzStep(n) =
  if n % 2 == 0
    then round(n / 2)
    else n * 3 + 1
